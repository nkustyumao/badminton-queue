# ⚡ WebSocket 快速啟動指南

## 🚀 三步驟開始使用

### 第 1 步：啟動服務器

```bash
npm run dev
```

✅ 成功標誌：
```
🚀 ═══════════════════════════════════════════════════
🎯 羽球排隊系統正在運行
📡 HTTP 服務器: http://localhost:3000
⚡ WebSocket 已啟用 (Socket.IO)
🔧 環境: 開發模式
═══════════════════════════════════════════════════
```

### 第 2 步：開啟瀏覽器

訪問：`http://localhost:3000`

✅ 打開瀏覽器 Console（F12），應該看到：
```
✅ WebSocket 已連接: abc123xyz
```

### 第 3 步：測試實時同步

1. 開啟第二個瀏覽器視窗（`http://localhost:3000`）
2. 在第一個視窗新增隊員
3. 觀察第二個視窗 **立即同步** ⚡

---

## 📊 效能對比

### 之前（輪詢）
- 延遲：0-3 秒
- 30 裝置 = 600 次請求/分鐘
- 伺服器壓力：❌❌❌ 高

### 現在（WebSocket）
- 延遲：<100 毫秒 ⚡
- 30 裝置 = 30 個長連接
- 伺服器壓力：✅✅✅ 低

---

## ✅ 功能清單

### 即時同步的操作
- ✅ 新增/刪除/更新隊員
- ✅ 新增/刪除/更新場地
- ✅ 隊員加入/移出場地
- ✅ 清除所有場地
- ✅ 更新系統設定

### 自動處理
- ✅ 自動重連（網路中斷後）
- ✅ 自動同步（重連後）
- ✅ 錯誤處理
- ✅ 連接狀態顯示

---

## 🔍 檢查清單

### ✅ 確認 WebSocket 正常運作

1. **服務器端**
   - [ ] `npm run dev` 成功啟動
   - [ ] 看到「⚡ WebSocket 已啟用」訊息
   - [ ] 無錯誤訊息

2. **客戶端**
   - [ ] 打開 Console（F12）
   - [ ] 看到「✅ WebSocket 已連接」
   - [ ] 無紅色錯誤訊息

3. **同步測試**
   - [ ] 開啟兩個視窗
   - [ ] 視窗 A 操作 → 視窗 B 立即同步
   - [ ] 延遲 <1 秒

---

## 🐛 快速疑難排解

### 問題：WebSocket 連接失敗

**解決方法**：
```bash
# 1. 停止服務器（Ctrl+C）
# 2. 重新啟動
npm run dev
# 3. 刷新瀏覽器（F5）
```

### 問題：更新沒有即時同步

**檢查**：
1. Console 是否顯示「✅ WebSocket 已連接」？
2. 服務器 Console 是否有錯誤？
3. 嘗試刷新頁面（F5）

### 問題：想切換回輪詢模式

**步驟**：
1. 編輯 `src/config/realtimeConfig.js`
   ```javascript
   export const realtimeConfig = {
     refetchInterval: 3000,  // 改為數字
   };
   ```
2. 使用標準啟動：`npm run dev:old`

---

## 📱 多裝置測試

### 電腦 + 手機測試

1. **查看電腦 IP**
   - Windows: `ipconfig`
   - Mac/Linux: `ifconfig`
   - 找到類似 `192.168.1.100` 的 IP

2. **手機連接**
   - 確保手機和電腦在同一 Wi-Fi
   - 手機瀏覽器訪問：`http://192.168.1.100:3000`

3. **測試同步**
   - 電腦操作 → 手機立即更新 ✅
   - 手機操作 → 電腦立即更新 ✅

---

## 📚 進階文檔

想了解更多？查看：
- 📘 `WEBSOCKET_GUIDE.md` - 完整技術文檔
- 📙 `REALTIME_SYNC.md` - 實時同步說明
- 📗 `src/config/README.md` - 配置選項

---

## 🎉 完成！

您的羽毛球排隊系統現在具備：
- ⚡ 真正的即時同步（<100ms）
- 🌐 支援多裝置（30+ 裝置）
- 🔄 自動重連與錯誤處理
- 📡 低伺服器負擔

享受實時同步的流暢體驗！🏸

